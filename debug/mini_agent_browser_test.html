<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mini-Agent Browser Test</title>
  <style>body{font-family:sans-serif;margin:2rem} pre{background:#f6f8fa;padding:1rem;border-radius:6px;}</style>
</head>
<body>
  <h1>Mini-Agent Browser Test</h1>
  <p>Defaults to <code>http://127.0.0.1:8788</code>. You can change the base and press the buttons.</p>
  <label>Base URL: <input id="base" value="http://127.0.0.1:8788" size="40"/></label>
  <div style="margin-top:1rem">
    <button onclick="ready()">GET /ready</button>
    <button onclick="run()">POST /agent/run (tool_backend=local)</button>
  </div>
  <h3>Result</h3>
  <pre id="out"></pre>

  <script>
    const out = document.getElementById('out');
    function base(){ return document.getElementById('base').value.replace(/\/$/, ''); }
    async function ready(){
      out.textContent = 'Loading /ready...';
      const r = await fetch(base()+"/ready");
      out.textContent = await r.text();
    }
    async function run(){
      out.textContent = 'Posting /agent/run...';
      const body = { messages:[{role:'user',content:'hi'}], model:'dummy', tool_backend:'local' };
      const r = await fetch(base()+"/agent/run", { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify(body)});
      out.textContent = await r.text();
    }
  </script>
</body>
</html>
